## 1. 外生事件的市场
### 1.1. 什么是外生事件的市场
外生事件的市场是指选择的好坏不受到行动参与者的影响的市场. 博彩市场和总统大选都是外生事件市场

### 1.2. 预测市场
预测市场中的商品通常都是简单的，一般是特别设计出来以聚合人们关于一个未来事件的预测，以形成市场的一个观点. 在一个预测市场中，参与者在某个事件的结果上下注. 

### 1.3. 效用评估
特别地, 我们取效用函数为对数函数, 对数效用具有一个简单的性质, 无论一个人当前的财富时多少, 财富翻倍对他的效用总是一致的. 

### 1.4. 下注策略
设$A$和$B$的赔付率分别为$O_A$和$O_B$, 假设赌客的财富总量为$w$, 在$A$上投放的财富的份额为$r$, 若$A$取胜, 它将拥有财富$rwO_A$. 赌客相信$A$取胜的概率为$a$, $B$取胜的概率为$1-a$. 则赌客在赌局结束后的期望效用为
$$
a\ln(rwO_A) + (1-a)\ln((1-r)wO_B)
$$
当$r=a$时, 期望效用最大, 这意味着赌客应该用他的信念作为下注策略. 

### 1.5. 赔付率的确定
赔付率即为赌场为赌客正确下注一块钱所需要支付的钱数. 赔付率的倒数被称为状态价格, 即赌客为了得到一块钱的回报所需要正确下注的钱数. 当采用无成本和非盈利假设时, 状态价格应该是赌客信念的加权平均, 权重即为赌客$n$的财富在总财富中的份额$f_n$. 
___
##### Proof
如果$A$获胜, 赛马场欠赌客$n$的钱就是$a_nw_nO_A$. 对于所有赌客求和就是
$$
w = \sum\limits_{i=1}^{N}a_iw_iO_A 
$$
令$f_i = \dfrac{w_i}{w}$, 则我们有
$$
a_1f_1+a_2f_2+\cdots + a_nf_n = \dfrac{1}{O_A}
$$ 
同理, 我们有
$$
(1-a_1)f_1+(1-a_2)f_2+\cdots + (1-a_n)f_n = \dfrac{1}{O_B}
$$
#####
___

### 1.6. 群众智慧
从市场长期的历史来看, 尽管每个人掌握的信息都是有限的, 但许多人的聚合行为可以产生非常准确的信念. 如果群众中对$A$的取胜概率的观点来自于一个独立分布, 均值等于$A$取胜的真实概率. 并且如果财富的份额时相等的, 那么状态价格随着群众规模的扩大收敛到真实的概率. 

### 1.7. 群众智慧的局限性
1. 级联的形成可能会影响群众观点的独立性
2. 财富分配不均匀可能会使得每个信念的权重不相同


## 2. 内生事件的市场
### 2.1. 信息不对称
在许多买卖双方有互动的情形中, 市场的一方对交易的货物或服务比另一方有更好的信息. 

### 2.2. 市场的财富动力学
一开始, 贝叶斯学习者不知道 $A$ 和 $B$ 取胜的概率, 他要通过多次观察比赛的情况来获得这两个参数。从 $N$ 个可能的概率假设开始 $\left(a_1, b_1\right),\left(a_2, b_2\right), \cdots,\left(a_N, b_N\right)$. 学习者从一个先验概率$\boldsymbol{f}$开始, 最初学习者预测$A$取胜的概率为
$$
a_1f_1+a_2f_2+\cdots + a_Nf_N
$$
用$\boldsymbol{s}$表示观察到的结果, 其中有$k$次$A$取得胜利, $l$次$B$取得胜利. $T = k+l$ 
$$
\mathbb{P}\left[\left(a_n, b_n\right) \mid \boldsymbol{s}\right]=\frac{\mathbb{P}\left[\boldsymbol{s} \mid\left(a_n, b_n\right)\right] \mathbb{P}\left[\left(a_n, b_n\right)\right]}{\mathbb{P}(\boldsymbol{s})}=\frac{f_n a_n^k b_n^l}{f_1 a_1^k b_1^l+f_2 a_2^k b_2^l+\ldots f_N a_N^k b_N^l}
$$ 
因此当观测到这些结果以后, 学习者对 ${A}$ 预测的概率就是 
$$
\mathbb{P}(A\mid \boldsymbol{s}) = a_1 \mathbb{P}\left[\left(a_1, b_1\right) \mid \boldsymbol{s}\right]+a_2 \mathbb{P}\left[\left(a_2, b_2\right) \mid \boldsymbol{s}\right]+\cdots+a_N \mathbb{P}\left[\left(a_N, b_N\right) \mid \boldsymbol{s}\right]
$$
记 
$$
R_n(\boldsymbol{s})=\frac{\mathbb{P}\left[\left(a_1, b_1\right) \mid \boldsymbol{s}\right]}{\mathbb{P}\left[\left(a_n, b_n\right) \mid \boldsymbol{s}\right]}=\frac{f_1 a_1^k b_1^l}{f_n a_n^k b_n^l}
$$
取对数 
$$
\ln \left(R_n(\boldsymbol{s})\right)=\ln \left(\frac{f_1}{f_n}\right)+k \ln \left(\frac{a_1}{a_n}\right)+l \ln \left(\frac{b_1}{b_n}\right)
$$ 
同时除以观察的总次数 $T$, 并取极限可得 
$$
\lim _{T \rightarrow \infty} \frac{\ln \left(R_n(\boldsymbol{s})\right)}{T}=a \ln a_1+b \ln b_1-\left(a \ln a_n+b \ln b_n\right)
$$
这表明一个贝叶斯学习者在极限意义上会给最接近真实情况的假设的后验概率赋值为$1$

## 3. 表决
### 3.1. 孔多塞悖论
即使每个人的偏好是传递的, 群体的偏好也可能是不传递的. 假设我们有三个人1,2,3和三个候选者$X, Y$和$Z$. 进一步假设3个人的偏好如下
$$
\begin{aligned}
&X \succ_1 Y \succ_1 Z\\
&Y>_2 Z>_2 X\\
&Z \succ_3 X>_3 Y
\end{aligned}
$$
应用少数服从多数的法则来定义群体偏好, 我们可以得到$X\succ Y$, $Y\succ Z$以及$Z\succ X$. 

孔多塞悖论指出了少数服从多数表决法则的结果依赖于一种策略议程设置(strategic agenda setting)的行为.

### 3.2. 波达计数法
如果总共有$k$个候选项, 那么对于排在第$i$位的候选项赋值$k-i$. 候选项得到的数值权重取决于它们在个人排序中的位置. 

波达计数法存在策略性偏好误报问题。投票者有时可以通过撒谎，不告知他们的真实偏好而得利. 在选项数很多的情况下, 可以压低其他投票者放在他们排序顶端候选项的排名. 

### 3.3. 合理表决系统
合理的表决系统应该满足两个性质
1. **趋同原则**: 如果有一对候选项$X$和$Y$, 所有选民都给出了$X\succ Y$, 那么群体的偏好应该是$X\succ Y$. 
2. **无关选项的独立性**: 对于任意两个候选项$X$和$Y$, 它们在组排序的顺序仅取决于它们在个人排序中的相对位置. 换句话说, 设从一组个人排序产生的组排序满足$X\succ Y$, 如果在一些个人排序中我们移动某个候选项$Z$的位置, 但保持$X$和$Y$的相对位置不变, 则结果组排序仍然满足$X\succ Y$. 这个条件称为无关候选项的独立性(Independence of Irrelevant Alternatives, IIA).

### 3.4. 阿罗不可能定理
如果至少有三个候选项, 则没有任何表决系统同时满足趋同性, IIA和无独裁性.
___
##### Proof
我们从一个候选项的有穷集合出发, 设有$k$个人, 记为$1,2,3, \cdots, k$, 第$i$个人对候选项的排序记为$\boldsymbol{p}_i$, $P = \{\boldsymbol{p_1}, \boldsymbol{p}_2, \cdots, \boldsymbol{p}_k\}$是一个组合. 表决系统是一个函数, 记作$F$, 用$F(P)$表示表决系统$F$在$P$上产生的组排序.
1. 表决系统的趋同性: 若对$\forall 1\le i\le k$, $\boldsymbol{p}_i$中都有$X\succ Y$, 则$F(P)$中也有$X\succ Y$.
2. 表决系统的无关项独立性: 考虑组合$P$和任意两个候选项$X$和$Y$, 定义$\boldsymbol{p}^*_i(X, Y)$为$\boldsymbol{p}_i$中$X$和$Y$的序关系. $P^*(x, y)=\left\{\boldsymbol{p}_1^*(x, y), \boldsymbol{p}_2^*(x, y), \ldots \boldsymbol{p}_k^*(x, y)\right\}$, 若 $P_{(0)}^*(x, y)=P_{(1)}^*(x, y)$, 则 $F\left(P_{(0)}\right)(x, y)=F\left(P_{(1)}\right)(x, y)$

称$X$是一个极化候选项, 如果对$\forall 1\le i\le k$, $X$都位于$\boldsymbol{p}_i$的第一位或者最后一位. 如果$X$是一个极化候选项, 则$X$在$F(P)$中也只能是第一位或者最后一位. 否则, 假设在$F(P)$中有$A\succ X\succ B$, 将所有个人排序$\boldsymbol{p}_i$中的$B$移动到$A$前面, 则由趋同性原则可以得到$B\succ A$. 但是这样的变动没有改变$A$和$X$与$B$和$X$的相对位置, 由独立无关性可以得到$A\succ X\succ B$, 这就产生了矛盾. 

取一个候选项$X$, 从任意一个组合$P_0$开始, $P_0$满足$X$在它所有个人排序中都是最后一个. 对于任意的$P_i, i=1,2,\cdots, k$, 都有
1. $X$在其所包含的个人排序$1,2,\cdots, i$都是第一位
2. $X$在其所包含的个人排序$i+1, i+2, \cdots, k$都是最后一位
3. 所有其他候选项的次序都如同$P_0$中的次序

根据趋同性, $X$必须在组排名$F(P_0)$的最后一个, 并且它必须是组排名$F(P_k)$的最后一个. 因此, 沿着这个序列, 存在第一个组合, $X$在其组排序的第一个位置, 不妨设其为$P_j$. 下面我们证明$j$实际上是个独裁者. 

令$Q$为任意一个组合, $Y$和$Z$是不等于$X$的候选项, $j$在个人排序中将$Y$放在$Z$的前面. 我们构造一个附加组合: 对于$i=1,2,\cdots, j$, 将$X$移动到$i$的个人排序的最前面, 对于$i=j+1, \cdots, k$, 将$X$移动到$i$的个人排序的最后面. 得到辅助组合$P_j$. 然后, 我们将$Y$移动到$j$的个人排序的最前面. 得到辅助组合$Q^{\prime}$
1. 当限制到$X$和$Z$时, $P_j$和$Q^{\prime}$是相同的, 因此根据IIA, 在$F(Q^{\prime})$中有$X\succ Z$. 
2. 当限制到$X$和$Y$时, $P_{j-1}$和$Q^{\prime}$是相同的, 因此根据IIA, 在$F(Q^{\prime})$中有$Y\succ X$.
3. 当限制到$Y$和$Z$时, $Q^{\prime}$和$Q$是相同的, 因此根据IIA, 在$F(Q)$中有$Y\succ Z$.

这就证明了$j$是在所有不涉及$X$的候选项对的独裁者
#####
___

## 4. 其他表决模型
### 4.1. 单峰偏好
假设$k$个候选项分别是$X_1,X_2, \cdots, X_k$, 我们称一个投票人具有单峰偏好, 当且仅当不存在候选项$X_s$, 它的两个邻居$X_{s-1}$和$X_{s+1}$的排位都比$X_s$高.

如果所有个体的排名都是单峰的, 那么将少数服从多数规则应用到所有候选项对中, 所产生的组偏好关系是完备且传递的. 

### 4.2. 个人首选项表的中间项
考虑每个候选人排在最高的候选项, 把这些首选项从左到右按照顺序排列得到个人首选项列表. 个人首选项列表的中间项在少数服从多数的两两比较中胜出所有其他的候选项. 
___
##### Proof
设个人首选项列表的中间项为$X_k$, 对于任意的$s< k$, 在$X_k$右侧的所有候选人的排序中, 都有$X_s\prec X_k$, 因此在少数服从多数的表决中, 有超过一半的$X_s\prec X_k$, 这意味着在表决系统$F$中, 有$X_s\prec X_k$. 同理, 对任意的$s>k$, 可以证明在表决系统$F$中, 有$X_s\prec X_k$. 因此$X_k$胜出所有其他的候选项. 
#####
___

### 4.3. 鼓励虚假投票的实验
假设一个装有 10 颗弹子的坛子要放在一间屋子的前面, 有 $50 \%$ 的机会, 坛子里装有 10 颗白色的弹子, $50 \%$ 机会是 9 颗绿色的和 1 颗白色的。实验者让 3 个人来猜一猜现在是哪一种情况。首先, 每个人允许从坛子中取出一颗弹子, 然后将它放回去 (不让其他两个人知道)。然后三个人做一次同时的投票, 如果至少有两个人说对了, 则三个人都会得到一笔奖金, 否则, 三个人什么都得不到。

作为参与人, 假设你知道其他两个参与人会诚实地投票, 那么当你的一票起作用的时候, 坛子里一定有绿色的弹子。因此，无论你的私有信息是什么，你的策略是唯一确定的. 

### 4.4. 陪审团投票的信息建模
假设每个陪审团收到一个独立的私有信号, 建议有罪 $(G)$ 或无辜 $(I)$ 。我们假设倾向于真实情况的信号比倾向于错误的信号要丰富。也就是说对于某个 $q>\dfrac{1}{2}$, 有 
$$
\mathbb{P}\left(G\text{ signal}\mid \text{defendant is guilty}\right) = q, \quad \mathbb{P}\left(I\text{ signal}\mid \text{defendant is innocent}\right) = q
$$
假设嫌疑人有罪的先验概率为$\dfrac{1}{2}$. 根据贝叶斯规则, 可以得到
$$
\mathbb{P}\left(\text{defendant is guilty}\mid G\text{ signal}\right) = q, \quad \mathbb{P}\left(\text{defendant is innocent}\mid I\text{ signal}\right) = q
$$

在陪审团的模型下, 如果你接受到一个 $I$ 信号, 你唯一能影响结果的情形是别人都投有罪。假设你相信其他人都会按照他们自己的信号投票, 被告有罪的概率是
$$
\mathbb{P}\left(\text{defendant is guilty}\mid I\text{ signal}\right) = \dfrac{q^{k-2}}{q^{k-2}+(1-q)^{k-2}}
$$
从这个计算中得到的结论是, 如果你相信其他人都是按照他们的信号投票, 且陪审团足够大, 你就总应该忽略你的信号而投有罪. 

在这个均衡中. 将一个无辜被告定罪的概率, 是一个不会随着陪审团规模变大而趋于$0$的正数. 
